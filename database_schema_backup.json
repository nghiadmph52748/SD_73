{
  "database_name": "gearup",
  "tables": {
    "danh_gia": {
      "fields": {
        "id": "int (primary key)",
        "id_san_pham": "int",
        "id_nguoi_dung": "int",
        "ngay_danh_gia": "datetime",
        "diem": "int",
        "mo_ta": "text"
      },
      "foreign_keys": [
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_nguoi_dung",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "dat_hang_ct": {
      "fields": {
        "id": "int (primary key)",
        "id_dat_hang": "int",
        "id_san_pham": "int",
        "id_bien_the_san_pham": "int",
        "so_luong": "int",
        "gia_ban": "decimal",
        "thanh_tien": "decimal"
      },
      "foreign_keys": [
        {
          "field": "id_dat_hang",
          "references": "dat_hang.id"
        },
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_bien_the_san_pham",
          "references": "bien_the_san_pham.id"
        }
      ]
    },
    "dat_hang": {
      "fields": {
        "id": "int (primary key)",
        "id_nguoi_dung": "int",
        "sdt_nhan_hang": "varchar",
        "dia_chi_giao_hang": "text",
        "ten_nguoi_nhan": "varchar",
        "ghi_chu": "text",
        "trang_thai": "varchar",
        "thanh_toan": "varchar",
        "ngay_dat": "datetime",
        "ngay_xuat": "datetime",
        "tong_tien": "decimal",
        "ma_giam_gia": "varchar",
        "khuyen_mai": "decimal",
        "van_chuyen": "decimal",
        "tong_thanh_toan": "decimal"
      },
      "foreign_keys": [
        {
          "field": "id_nguoi_dung",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "gio_hang": {
      "fields": {
        "id": "int (primary key)",
        "id_nguoi_dung": "int",
        "id_san_pham": "int",
        "id_bien_the_san_pham": "int",
        "so_luong": "int"
      },
      "foreign_keys": [
        {
          "field": "id_nguoi_dung",
          "references": "nguoi_dung.id"
        },
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_bien_the_san_pham",
          "references": "bien_the_san_pham.id"
        }
      ]
    },
    "danh_muc": {
      "fields": {
        "id": "int (primary key)",
        "ten_danh_muc": "varchar",
        "mo_ta": "text",
        "duong_dan": "varchar",
        "vi_tri": "int",
        "id_cha": "int",
        "trang_thai": "boolean"
      },
      "foreign_keys": [
        {
          "field": "id_cha",
          "references": "danh_muc.id",
          "note": "self-referencing for category hierarchy"
        }
      ]
    },
    "thuong_hieu": {
      "fields": {
        "id": "int (primary key)",
        "ten_thuong_hieu": "varchar",
        "mo_ta": "text",
        "logo": "varchar",
        "trang_thai": "boolean"
      }
    },
    "san_pham": {
      "fields": {
        "id": "int (primary key)",
        "id_danh_muc": "int",
        "id_thuong_hieu": "int",
        "ten_san_pham": "varchar",
        "slug": "varchar",
        "xuat_xu": "varchar",
        "kich_co": "varchar",
        "trong_luong": "decimal",
        "chat_lieu": "varchar",
        "mo_ta": "text",
        "gia_ban": "decimal",
        "khuyen_mai": "decimal",
        "so_luong": "int",
        "hinh_anh": "varchar",
        "ngay_nhap": "datetime",
        "trang_thai": "boolean"
      },
      "foreign_keys": [
        {
          "field": "id_danh_muc",
          "references": "danh_muc.id"
        },
        {
          "field": "id_thuong_hieu",
          "references": "thuong_hieu.id"
        }
      ]
    },
    "bien_the_san_pham": {
      "fields": {
        "id": "int (primary key)",
        "id_san_pham": "int",
        "id_mau_sac": "int",
        "id_kich_thuoc": "int",
        "so_luong": "int",
        "gia_ban": "decimal",
        "gia_khuyen_mai": "decimal",
        "hinh_anh": "varchar"
      },
      "foreign_keys": [
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_mau_sac",
          "references": "mau_sac.id"
        },
        {
          "field": "id_kich_thuoc",
          "references": "kich_thuoc.id"
        }
      ]
    },
    "mau_sac": {
      "fields": {
        "id": "int (primary key)",
        "ten_mau_sac": "varchar",
        "ma_mau": "varchar"
      }
    },
    "kich_thuoc": {
      "fields": {
        "id": "int (primary key)",
        "ten_kich_thuoc": "varchar",
        "mo_ta": "text"
      }
    },
    "nguoi_dung": {
      "fields": {
        "id": "int (primary key)",
        "tai_khoan": "varchar (unique)",
        "mat_khau": "varchar",
        "vai_tro": "varchar",
        "ho_ten": "varchar",
        "gioi_tinh": "varchar",
        "ngay_sinh": "date",
        "sdt": "varchar",
        "email": "varchar",
        "dia_chi": "text",
        "anh_dai_dien": "varchar",
        "trang_thai": "boolean"
      }
    },
    "ma_giam_gia": {
      "fields": {
        "id": "int (primary key)",
        "ma_giam_gia": "varchar (unique)",
        "mo_ta": "text",
        "loai_giam_gia": "varchar",
        "gia_tri_giam": "decimal",
        "don_hang_toi_thieu": "decimal",
        "giam_toi_da": "decimal",
        "so_luong": "int",
        "ngay_bat_dau": "datetime",
        "ngay_ket_thuc": "datetime",
        "trang_thai": "boolean"
      }
    },
    "hinh_anh_san_pham": {
      "fields": {
        "id": "int (primary key)",
        "id_san_pham": "int",
        "duong_dan": "varchar",
        "thu_tu": "int"
      },
      "foreign_keys": [
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        }
      ]
    },
    "nhat_ky_hoat_dong": {
      "fields": {
        "id": "int (primary key)",
        "id_nguoi_dung": "int",
        "hanh_dong": "varchar",
        "mo_ta": "text",
        "thoi_gian": "datetime",
        "ip_address": "varchar"
      },
      "foreign_keys": [
        {
          "field": "id_nguoi_dung",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "lien_he": {
      "fields": {
        "id": "int (primary key)",
        "ho_ten": "varchar",
        "email": "varchar",
        "sdt": "varchar",
        "tieu_de": "varchar",
        "noi_dung": "text",
        "ngay_gui": "datetime",
        "trang_thai": "varchar"
      }
    },
    "binh_luan": {
      "fields": {
        "id": "int (primary key)",
        "id_san_pham": "int",
        "id_nguoi_dung": "int",
        "noi_dung": "text",
        "ngay_binh_luan": "datetime",
        "trang_thai": "boolean"
      },
      "foreign_keys": [
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_nguoi_dung",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "yeu_thich": {
      "fields": {
        "id": "int (primary key)",
        "id_nguoi_dung": "int",
        "id_san_pham": "int",
        "ngay_them": "datetime"
      },
      "foreign_keys": [
        {
          "field": "id_nguoi_dung",
          "references": "nguoi_dung.id"
        },
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        }
      ]
    },
    "thong_bao": {
      "fields": {
        "id": "int (primary key)",
        "id_nguoi_dung": "int",
        "tieu_de": "varchar",
        "noi_dung": "text",
        "loai": "varchar",
        "da_doc": "boolean",
        "ngay_tao": "datetime"
      },
      "foreign_keys": [
        {
          "field": "id_nguoi_dung",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "phieu_nhap_kho": {
      "fields": {
        "id": "int (primary key)",
        "ma_phieu": "varchar",
        "id_nguoi_tao": "int",
        "ngay_nhap": "datetime",
        "nha_cung_cap": "varchar",
        "tong_tien": "decimal",
        "ghi_chu": "text",
        "trang_thai": "varchar"
      },
      "foreign_keys": [
        {
          "field": "id_nguoi_tao",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "chi_tiet_phieu_nhap": {
      "fields": {
        "id": "int (primary key)",
        "id_phieu_nhap": "int",
        "id_san_pham": "int",
        "id_bien_the_san_pham": "int",
        "so_luong": "int",
        "gia_nhap": "decimal",
        "thanh_tien": "decimal"
      },
      "foreign_keys": [
        {
          "field": "id_phieu_nhap",
          "references": "phieu_nhap_kho.id"
        },
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_bien_the_san_pham",
          "references": "bien_the_san_pham.id"
        }
      ]
    },
    "phieu_xuat_kho": {
      "fields": {
        "id": "int (primary key)",
        "ma_phieu": "varchar",
        "id_nguoi_tao": "int",
        "id_dat_hang": "int",
        "ngay_xuat": "datetime",
        "ly_do": "varchar",
        "ghi_chu": "text",
        "trang_thai": "varchar"
      },
      "foreign_keys": [
        {
          "field": "id_nguoi_tao",
          "references": "nguoi_dung.id"
        },
        {
          "field": "id_dat_hang",
          "references": "dat_hang.id"
        }
      ]
    },
    "chi_tiet_phieu_xuat": {
      "fields": {
        "id": "int (primary key)",
        "id_phieu_xuat": "int",
        "id_san_pham": "int",
        "id_bien_the_san_pham": "int",
        "so_luong": "int"
      },
      "foreign_keys": [
        {
          "field": "id_phieu_xuat",
          "references": "phieu_xuat_kho.id"
        },
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_bien_the_san_pham",
          "references": "bien_the_san_pham.id"
        }
      ]
    },
    "ton_kho": {
      "fields": {
        "id": "int (primary key)",
        "id_san_pham": "int",
        "id_bien_the_san_pham": "int",
        "so_luong_ton": "int",
        "ngay_cap_nhat": "datetime"
      },
      "foreign_keys": [
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_bien_the_san_pham",
          "references": "bien_the_san_pham.id"
        }
      ]
    },
    "thanh_toan": {
      "fields": {
        "id": "int (primary key)",
        "id_dat_hang": "int",
        "phuong_thuc": "varchar",
        "ma_giao_dich": "varchar",
        "so_tien": "decimal",
        "trang_thai": "varchar",
        "ngay_thanh_toan": "datetime",
        "ghi_chu": "text"
      },
      "foreign_keys": [
        {
          "field": "id_dat_hang",
          "references": "dat_hang.id"
        }
      ]
    },
    "cai_dat": {
      "fields": {
        "id": "int (primary key)",
        "khoa": "varchar",
        "gia_tri": "text",
        "mo_ta": "text"
      }
    },
    "dia_chi_admin": {
      "fields": {
        "id": "int (primary key)",
        "tinh_thanh": "varchar",
        "quan_huyen": "varchar", 
        "xa_phuong": "varchar",
        "ma_tinh": "varchar",
        "ma_quan": "varchar",
        "ma_xa": "varchar",
        "cap_do": "int",
        "trang_thai": "boolean"
      }
    },
    "lich_su_trang_thai_don_hang": {
      "fields": {
        "id": "int (primary key)",
        "id_dat_hang": "int",
        "trang_thai_cu": "varchar",
        "trang_thai_moi": "varchar",
        "id_nguoi_thay_doi": "int",
        "ngay_thay_doi": "datetime",
        "ghi_chu": "text",
        "ly_do": "varchar"
      },
      "foreign_keys": [
        {
          "field": "id_dat_hang",
          "references": "dat_hang.id"
        },
        {
          "field": "id_nguoi_thay_doi",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "nhan_vien_xu_ly_don_hang": {
      "fields": {
        "id": "int (primary key)",
        "id_dat_hang": "int",
        "id_nhan_vien": "int", 
        "vai_tro_xu_ly": "varchar",
        "ngay_gan": "datetime",
        "ngay_hoan_thanh": "datetime",
        "trang_thai": "varchar",
        "ghi_chu": "text"
      },
      "foreign_keys": [
        {
          "field": "id_dat_hang",
          "references": "dat_hang.id"
        },
        {
          "field": "id_nhan_vien",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "phuong_thuc_van_chuyen": {
      "fields": {
        "id": "int (primary key)",
        "ten_phuong_thuc": "varchar",
        "mo_ta": "text",
        "phi_co_ban": "decimal",
        "thoi_gian_giao_hang": "int",
        "don_vi_thoi_gian": "varchar",
        "khu_vuc_ho_tro": "text",
        "trang_thai": "boolean"
      }
    },
    "van_chuyen_don_hang": {
      "fields": {
        "id": "int (primary key)",
        "id_dat_hang": "int",
        "id_phuong_thuc_van_chuyen": "int",
        "ma_van_don": "varchar",
        "phi_van_chuyen": "decimal",
        "ngay_gui": "datetime",
        "ngay_nhan_du_kien": "datetime",
        "ngay_nhan_thuc_te": "datetime",
        "trang_thai_van_chuyen": "varchar",
        "ghi_chu": "text"
      },
      "foreign_keys": [
        {
          "field": "id_dat_hang",
          "references": "dat_hang.id"
        },
        {
          "field": "id_phuong_thuc_van_chuyen",
          "references": "phuong_thuc_van_chuyen.id"
        }
      ]
    },
    "tra_hang": {
      "fields": {
        "id": "int (primary key)",
        "id_dat_hang": "int",
        "ma_tra_hang": "varchar",
        "id_nguoi_yeu_cau": "int",
        "ly_do_tra_hang": "text",
        "tong_tien_hoan": "decimal",
        "trang_thai": "varchar",
        "ngay_yeu_cau": "datetime",
        "ngay_xu_ly": "datetime",
        "id_nguoi_xu_ly": "int",
        "ghi_chu_xu_ly": "text"
      },
      "foreign_keys": [
        {
          "field": "id_dat_hang",
          "references": "dat_hang.id"
        },
        {
          "field": "id_nguoi_yeu_cau",
          "references": "nguoi_dung.id"
        },
        {
          "field": "id_nguoi_xu_ly",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "chi_tiet_tra_hang": {
      "fields": {
        "id": "int (primary key)",
        "id_tra_hang": "int",
        "id_san_pham": "int",
        "id_bien_the_san_pham": "int",
        "so_luong": "int",
        "gia_ban_goc": "decimal",
        "so_tien_hoan": "decimal",
        "trang_thai_san_pham": "varchar",
        "ghi_chu": "text"
      },
      "foreign_keys": [
        {
          "field": "id_tra_hang",
          "references": "tra_hang.id"
        },
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_bien_the_san_pham",
          "references": "bien_the_san_pham.id"
        }
      ]
    },
    "bang_gia_van_chuyen": {
      "fields": {
        "id": "int (primary key)",
        "id_phuong_thuc": "int",
        "khu_vuc": "varchar",
        "trong_luong_min": "decimal",
        "trong_luong_max": "decimal",
        "phi_van_chuyen": "decimal",
        "phi_cod": "decimal",
        "ngay_ap_dung": "datetime",
        "ngay_het_han": "datetime",
        "trang_thai": "boolean"
      },
      "foreign_keys": [
        {
          "field": "id_phuong_thuc",
          "references": "phuong_thuc_van_chuyen.id"
        }
      ]
    },
    "kho_hang": {
      "fields": {
        "id": "int (primary key)",
        "ten_kho": "varchar",
        "dia_chi": "text",
        "nguoi_quan_ly": "int",
        "dien_thoai": "varchar",
        "email": "varchar",
        "trang_thai": "boolean",
        "ngay_tao": "datetime"
      },
      "foreign_keys": [
        {
          "field": "nguoi_quan_ly",
          "references": "nguoi_dung.id"
        }
      ]
    },
    "ton_kho_theo_kho": {
      "fields": {
        "id": "int (primary key)",
        "id_kho": "int",
        "id_san_pham": "int",
        "id_bien_the_san_pham": "int",
        "so_luong_ton": "int",
        "so_luong_dat_truoc": "int",
        "so_luong_co_the_ban": "int",
        "ngay_cap_nhat": "datetime"
      },
      "foreign_keys": [
        {
          "field": "id_kho",
          "references": "kho_hang.id"
        },
        {
          "field": "id_san_pham",
          "references": "san_pham.id"
        },
        {
          "field": "id_bien_the_san_pham",
          "references": "bien_the_san_pham.id"
        }
      ]
    },
    "banner": {
      "fields": {
        "id": "int (primary key)",
        "tieu_de": "varchar",
        "mo_ta": "text",
        "hinh_anh": "varchar",
        "duong_dan": "varchar",
        "vi_tri": "varchar",
        "thu_tu": "int",
        "ngay_bat_dau": "datetime",
        "ngay_ket_thuc": "datetime",
        "trang_thai": "boolean"
      }
    },
    "bao_cao_doanh_thu": {
      "fields": {
        "id": "int (primary key)",
        "ngay_bao_cao": "date",
        "doanh_thu_ngay": "decimal",
        "so_don_hang": "int",
        "so_san_pham_ban": "int",
        "doanh_thu_tuan": "decimal",
        "doanh_thu_thang": "decimal",
        "chi_phi_van_chuyen": "decimal",
        "loi_nhuan": "decimal",
        "ghi_chu": "text"
      }
    }
  },
  "relationships": {
    "one_to_many": [
      {
        "from": "nguoi_dung",
        "to": "dat_hang",
        "description": "One user can have many orders"
      },
      {
        "from": "nguoi_dung",
        "to": "gio_hang",
        "description": "One user can have many cart items"
      },
      {
        "from": "nguoi_dung",
        "to": "danh_gia",
        "description": "One user can write many reviews"
      },
      {
        "from": "nguoi_dung",
        "to": "binh_luan",
        "description": "One user can write many comments"
      },
      {
        "from": "nguoi_dung",
        "to": "yeu_thich",
        "description": "One user can have many favorite products"
      },
      {
        "from": "nguoi_dung",
        "to": "thong_bao",
        "description": "One user can receive many notifications"
      },
      {
        "from": "san_pham",
        "to": "bien_the_san_pham",
        "description": "One product can have many variants"
      },
      {
        "from": "san_pham",
        "to": "hinh_anh_san_pham",
        "description": "One product can have many images"
      },
      {
        "from": "san_pham",
        "to": "danh_gia",
        "description": "One product can have many reviews"
      },
      {
        "from": "san_pham",
        "to": "binh_luan",
        "description": "One product can have many comments"
      },
      {
        "from": "danh_muc",
        "to": "san_pham",
        "description": "One category can have many products"
      },
      {
        "from": "thuong_hieu",
        "to": "san_pham",
        "description": "One brand can have many products"
      },
      {
        "from": "dat_hang",
        "to": "dat_hang_ct",
        "description": "One order can have many order details"
      },
      {
        "from": "dat_hang",
        "to": "thanh_toan",
        "description": "One order can have payment records"
      },
      {
        "from": "mau_sac",
        "to": "bien_the_san_pham",
        "description": "One color can be used in many product variants"
      },
      {
        "from": "kich_thuoc",
        "to": "bien_the_san_pham",
        "description": "One size can be used in many product variants"
      },
      {
        "from": "phieu_nhap_kho",
        "to": "chi_tiet_phieu_nhap",
        "description": "One import receipt can have many details"
      },
      {
        "from": "phieu_xuat_kho",
        "to": "chi_tiet_phieu_xuat",
        "description": "One export receipt can have many details"
      },
      {
        "from": "dat_hang",
        "to": "lich_su_trang_thai_don_hang",
        "description": "One order can have many status history records"
      },
      {
        "from": "dat_hang",
        "to": "nhan_vien_xu_ly_don_hang", 
        "description": "One order can be handled by many staff members"
      },
      {
        "from": "dat_hang",
        "to": "van_chuyen_don_hang",
        "description": "One order can have shipping information"
      },
      {
        "from": "dat_hang",
        "to": "tra_hang",
        "description": "One order can have return requests"
      },
      {
        "from": "tra_hang",
        "to": "chi_tiet_tra_hang",
        "description": "One return can have many return details"
      },
      {
        "from": "phuong_thuc_van_chuyen",
        "to": "van_chuyen_don_hang",
        "description": "One shipping method can be used for many orders"
      },
      {
        "from": "phuong_thuc_van_chuyen",
        "to": "bang_gia_van_chuyen",
        "description": "One shipping method can have many pricing tiers"
      },
      {
        "from": "kho_hang",
        "to": "ton_kho_theo_kho",
        "description": "One warehouse can store many products"
      },
      {
        "from": "nguoi_dung",
        "to": "lich_su_trang_thai_don_hang",
        "description": "One user can change many order statuses"
      },
      {
        "from": "nguoi_dung",
        "to": "nhan_vien_xu_ly_don_hang",
        "description": "One staff member can handle many orders"
      },
      {
        "from": "nguoi_dung",
        "to": "tra_hang",
        "description": "One user can make/handle many return requests"
      },
      {
        "from": "nguoi_dung",
        "to": "kho_hang",
        "description": "One user can manage many warehouses"
      }
    ],
    "many_to_many": [
      {
        "entity1": "san_pham",
        "entity2": "nguoi_dung",
        "through": "yeu_thich",
        "description": "Users can favorite many products, products can be favorited by many users"
      },
      {
        "entity1": "san_pham",
        "entity2": "nguoi_dung",
        "through": "gio_hang",
        "description": "Users can have many products in cart, products can be in many users' carts"
      }
    ]
  },
  "business_logic": {
    "inventory_management": "The system tracks inventory through ton_kho and ton_kho_theo_kho tables, updated via import/export receipts across multiple warehouses",
    "order_workflow": "Orders flow from gio_hang (cart) → dat_hang (order) → phieu_xuat_kho (export) → van_chuyen_don_hang (shipping) → thanh_toan (payment)",
    "order_status_tracking": "Order status changes are tracked in lich_su_trang_thai_don_hang with timestamps and responsible staff",
    "staff_assignment": "Orders can be assigned to staff members via nhan_vien_xu_ly_don_hang for processing and handling",
    "product_variants": "Products can have multiple variants based on color (mau_sac) and size (kich_thuoc)",
    "user_roles": "Users have different roles (vai_tro field) for access control",
    "discount_system": "Discount codes (ma_giam_gia) can be applied to orders with various conditions",
    "activity_logging": "User activities are tracked in nhat_ky_hoat_dong table",
    "hierarchical_categories": "Categories support parent-child relationships via id_cha field",
    "shipping_management": "Shipping is handled through phuong_thuc_van_chuyen with dynamic pricing via bang_gia_van_chuyen",
    "return_processing": "Returns are managed through tra_hang and chi_tiet_tra_hang tables with proper workflow",
    "address_system": "Vietnamese administrative divisions are managed through dia_chi_admin for proper address validation",
    "warehouse_system": "Multiple warehouses (kho_hang) can store products with separate inventory tracking",
    "content_management": "Homepage banners and promotional content managed through banner table",
    "reporting_system": "Revenue and sales reports generated and stored in bao_cao_doanh_thu table"
  }
}